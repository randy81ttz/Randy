<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>경상수지와 환율 쇼츠 템플릿 (최종판)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --pwc-orange: #D04A02;
            --pwc-dark-grey: #333333;
            --muji-bg: #F8F7F4;
            --muji-light-grey: #EAEAEA;
            --text-primary: #2d2d2d;
            --text-secondary: #555555;
            --graph-surplus: #3b82f6; /* 흑자: 파란색 */
            --graph-deficit: #f97316; /* 적자: 주황색 */
            --graph-exchange-rate: #6b7280; /* 환율: 회색 */
        }
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #111;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .app-container {
            width: 100%;
            max-width: 400px;
            aspect-ratio: 9 / 16;
            background-color: var(--muji-bg);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border-radius: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            position: relative;
        }
        .progress-bar-container {
            width: 100%;
            height: 5px;
            background-color: var(--muji-light-grey);
            position: absolute;
            top: 0;
            left: 0;
            z-index: 10;
        }
        .progress-bar {
            width: 0%;
            height: 100%;
            background-color: var(--pwc-orange);
            transition: width 0.5s linear;
        }
        .slide-content {
            flex-grow: 1;
            padding: 3rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0;
            position: absolute;
            width: 100%;
            height: 100%;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .slide-content.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- 슬라이드 타입별 스타일 --- */
        .title-slide h1 { font-size: 2.2rem; font-weight: 900; color: var(--text-primary); line-height: 1.3; margin-bottom: 1.5rem; }
        .title-slide h1 .highlight { color: var(--pwc-orange); }
        .title-slide p { font-size: 1.5rem; font-weight: 700; color: var(--text-secondary); }
        
        .definition-slide h2 { font-size: 2.8rem; font-weight: 900; color: var(--pwc-orange); margin-bottom: 1rem; }
        .definition-slide p { font-size: 1.2rem; font-weight: 700; color: var(--text-primary); margin-bottom: 2rem; }
        .definition-slide .formula { font-size: 1.1rem; font-weight: 400; color: var(--text-secondary); background-color: #ffffff; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: 1px solid var(--muji-light-grey); }

        .logic-slide { justify-content: space-around; padding: 4rem 2rem; }
        .logic-slide h2 { font-size: 1.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 2rem; }
        .logic-step { font-size: 1.15rem; font-weight: 700; color: var(--text-secondary); opacity: 0; transform: translateY(15px); animation: fadeInStep 0.5s forwards; background-color: white; padding: 0.8rem; border-radius: 0.5rem; margin-bottom: 1rem; width: 100%; border: 1px solid var(--muji-light-grey); }
        .logic-arrow { opacity: 0; animation: fadeInStep 0.5s forwards; margin-bottom: 1rem; }
        @keyframes fadeInStep { to { opacity: 1; transform: translateY(0); } }

        .graph-slide { padding: 2rem 1rem; justify-content: flex-start; }
        .graph-slide h2 { font-size: 1.4rem; font-weight: 700; color: var(--text-primary); margin-bottom: 0.5rem; }
        .graph-slide .legend { display: flex; justify-content: center; gap: 0.75rem; font-size: 0.7rem; margin-bottom: 0.5rem; flex-wrap: wrap; }
        .graph-slide .legend-item { display: flex; align-items: center; gap: 0.3rem; font-weight: 700; }

        .summary-slide .summary-box { width: 100%; background-color: #fff; padding: 2rem; border-radius: 1rem; border: 1px solid var(--muji-light-grey); }
        .summary-slide .summary-item .label { font-size: 1.5rem; font-weight: 700; color: var(--text-secondary); }
        .summary-slide .summary-item .value { font-size: 1.8rem; font-weight: 900; color: var(--pwc-orange); margin-top: 0.25rem; }
        .summary-slide hr { border: none; height: 1px; background-color: var(--muji-light-grey); margin: 1.5rem 0; }
        
        .footer { position: absolute; bottom: 1.5rem; width: 100%; text-align: center; font-size: 0.8rem; color: var(--text-secondary); font-weight: 700; }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="progress-bar-container">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
        <div id="slide-container"></div>
        <div class="footer">
            Easy Finance by J.
        </div>
    </div>

<script>
    const slidesData = [
        {
            type: 'title',
            duration: 3500,
            content: {
                title: `수출로 돈 벌면<br>환율은 왜 떨어질까?<br><span class="highlight">(원화 강세)</span>`,
                question: "경상수지와 환율의 비밀"
            }
        },
        {
            type: 'definition',
            duration: 4000,
            content: {
                title: '경상수지',
                subtitle: '(Current Account)',
                description: '우리나라가 해외와 거래한<br>성적표 (가계부)예요.',
                formula: '수출 > 수입 = 흑자 (+)'
            }
        },
        {
            type: 'definition',
            duration: 4000,
            content: {
                title: '환율',
                subtitle: '(Exchange Rate)',
                description: '나라 간 돈의 교환 비율!<br>원화의 힘을 보여줘요.',
                formula: '환율 하락 = 원화 가치 상승'
            }
        },
        {
            type: 'logic',
            duration: 5000,
            content: {
                title: '흑자 → 환율 하락, 왜 그럴까?',
                steps: [
                    '수출 기업, 달러(USD)를 번다',
                    '국내 사용 위해 원화(KRW)로 환전',
                    '시장에 달러(USD) 공급 증가',
                    '달러 가치 하락 & 원화 가치 상승'
                ]
            }
        },
        {
            type: 'graph',
            duration: 9000,
            content: {
                title: "실제 데이터로 보는 한국의 경상수지와 환율",
                // 데이터: [년도, 경상수지(억달러), 원/달러 환율(연평균)]
                // 출처: 한국은행 ECOS (억달러로 변환)
                data: [
                    [2000, 110.5, 1130.96], [2001, 80.3, 1291.13], [2002, 40.7, 1251.52], [2003, 113.1, 1192.17], [2004, 292.9, 1144.75],
                    [2005, 122.1, 1024.31], [2006, 20.9, 955.57], [2007, 104.7, 929.30], [2008, 17.5, 1102.58], [2009, 330.9, 1276.40],
                    [2010, 279.5, 1156.24], [2011, 166.4, 1108.06], [2012, 487.9, 1126.85], [2013, 772.6, 1095.04], [2014, 830.3, 1053.22],
                    [2015, 1051.2, 1131.49], [2016, 979.2, 1160.49], [2017, 752.3, 1130.85], [2018, 774.7, 1100.32], [2019, 596.8, 1165.66],
                    [2020, 759.0, 1180.08], [2021, 852.3, 1144.29], [2022, 258.3, 1291.95], [2023, 328.2, 1305.41], [2024, 990.4, 1350] // 2024년은 전망치
                ]
            }
        },
        {
            type: 'logic',
            duration: 4500,
            content: {
                title: '어? 그래프가 꼭 같진 않네?',
                steps: [
                    '맞아요! 경상수지 외에도',
                    '<b style="color:#D04A02">금리, 투자자금 흐름</b> 등',
                    '다양한 요인이 환율에',
                    '복합적으로 영향을 줘요.'
                ]
            }
        },
        {
            type: 'summary',
            duration: 5000,
            content: {
                items: [
                    { label: '경상수지 흑자는', value: '원화 강세(환율 하락) 요인' },
                    { label: '하지만 실제 환율은', value: '여러 변수가 함께 작용!' }
                ]
            }
        }
    ];

    function renderSlide(slide) {
        let html = '';
        switch (slide.type) {
            case 'title':
                html = `<div class="slide-content title-slide"><h1>${slide.content.title}</h1><p>${slide.content.question}</p></div>`;
                break;
            case 'definition':
                html = `<div class="slide-content definition-slide"><h2>${slide.content.title} <span style="font-size: 1.5rem; color: var(--text-secondary);">${slide.content.subtitle}</span></h2><p>${slide.content.description}</p><div class="formula">${slide.content.formula}</div></div>`;
                break;
            case 'logic':
                let stepsHtml = slide.content.steps.map((step, index) => `
                    <div class="logic-step" style="animation-delay: ${index * 0.6}s">${step}</div>
                    ${index < slide.content.steps.length - 1 ? `<div class="logic-arrow" style="animation-delay: ${index * 0.6 + 0.3}s"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 19V5M12 19L7 14M12 19L17 14" stroke="var(--text-secondary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div>` : ''}
                `).join('');
                html = `<div class="slide-content logic-slide"><h2>${slide.content.title}</h2><div>${stepsHtml}</div></div>`;
                break;
            case 'graph':
                const data = slide.content.data;
                const width = 380, height = 350, margin = {top: 20, right: 40, bottom: 30, left: 40};
                
                const caData = data.map(d => d[1]);
                const erData = data.map(d => d[2]);

                const caMax = Math.max(...caData.map(Math.abs)) * 1.1;
                const caMin = -caMax;
                const erMin = Math.min(...erData) * 0.95, erMax = Math.max(...erData) * 1.05;

                const xScale = (i) => margin.left + (i / (data.length - 1)) * (width - margin.left - margin.right);
                const caScale = (y) => height - margin.bottom - ((y - caMin) / (caMax - caMin)) * (height - margin.top - margin.bottom);
                const erScale = (y) => height - margin.bottom - ((y - erMin) / (erMax - erMin)) * (height - margin.top - margin.bottom);
                
                const zeroLineY = caScale(0);
                const barWidth = (width - margin.left - margin.right) / data.length * 0.7;

                const barsHtml = data.map((d, i) => {
                    const x = xScale(i) - barWidth / 2;
                    const y = d[1] >= 0 ? caScale(d[1]) : zeroLineY;
                    const barHeight = Math.abs(caScale(d[1]) - zeroLineY);
                    const color = d[1] >= 0 ? 'var(--graph-surplus)' : 'var(--graph-deficit)';
                    return `<rect x="${x}" y="${y}" width="${barWidth}" height="${barHeight}" fill="${color}" />`;
                }).join('');

                const erPath = data.map((d, i) => `${i === 0 ? 'M' : 'L'}${xScale(i)},${erScale(d[2])}`).join(' ');

                const xLabels = data.filter((d, i) => d[0] % 5 === 0).map((d, i) => {
                     const yearIndex = data.findIndex(item => item[0] === d[0]);
                     return `<text x="${xScale(yearIndex)}" y="${height - margin.bottom + 15}" text-anchor="middle" font-size="10" fill="var(--text-secondary)">'${String(d[0]).substring(2)}</text>`
                }).join('');

                html = `
                    <div class="slide-content graph-slide">
                        <h2>${slide.content.title}</h2>
                        <div class="legend">
                            <div class="legend-item"><div style="width:0.8rem;height:0.8rem;background:var(--graph-surplus);"></div><span>흑자</span></div>
                            <div class="legend-item"><div style="width:0.8rem;height:0.8rem;background:var(--graph-deficit);"></div><span>적자</span></div>
                            <div class="legend-item"><div style="width:1rem;height:2px;background:var(--graph-exchange-rate);"></div><span>환율</span></div>
                        </div>
                        <svg viewBox="0 0 ${width} ${height}">
                            <!-- Y-axis labels -->
                            <text x="${margin.left - 5}" y="${caScale(caMax*0.9)}" text-anchor="end" font-size="9" fill="var(--graph-surplus)">흑자</text>
                            <text x="${margin.left - 5}" y="${caScale(caMin*0.9)}" text-anchor="end" font-size="9" fill="var(--graph-deficit)">적자</text>
                            <text x="${width - margin.right + 5}" y="${erScale(erMax*0.95)}" text-anchor="start" font-size="9" fill="var(--graph-exchange-rate)">환율↑</text>
                            <text x="${width - margin.right + 5}" y="${erScale(erMin*1.05)}" text-anchor="start" font-size="9" fill="var(--graph-exchange-rate)">환율↓</text>
                            
                            <!-- Zero line -->
                            <line x1="${margin.left}" y1="${zeroLineY}" x2="${width - margin.right}" y2="${zeroLineY}" stroke="#ccc" stroke-width="1"/>
                            
                            <!-- Bars -->
                            ${barsHtml}
                            
                            <!-- Line Path -->
                            <path d="${erPath}" fill="none" stroke="var(--graph-exchange-rate)" stroke-width="2.5" />
                            
                            <!-- X-axis labels -->
                            ${xLabels}
                        </svg>
                    </div>`;
                break;
            case 'summary':
                let itemsHtml = slide.content.items.map((item, index) => `
                    <div class="summary-item">
                        <div class="label">${item.label}</div>
                        <div class="value">${item.value}</div>
                    </div>
                    ${index < slide.content.items.length - 1 ? '<hr>' : ''}
                `).join('');
                html = `<div class="slide-content summary-slide"><div class="summary-box">${itemsHtml}</div></div>`;
                break;
        }
        return html;
    }

    // --- (이하 스크립트는 이전 버전과 동일합니다) ---
    const slideContainer = document.getElementById('slide-container');
    const progressBar = document.getElementById('progress-bar');
    let currentSlideIndex = 0;
    let slideTimeout;

    function showNextSlide() {
        if (currentSlideIndex >= slidesData.length) {
            setTimeout(() => {
                currentSlideIndex = 0;
                showNextSlide();
            }, 2000);
            return;
        }

        const slide = slidesData[currentSlideIndex];
        slideContainer.innerHTML = renderSlide(slide);

        const activeSlide = slideContainer.querySelector('.slide-content');
        if (activeSlide) {
            setTimeout(() => activeSlide.classList.add('active'), 50);
        }

        const totalDuration = slidesData.reduce((acc, s) => acc + s.duration, 0);
        const elapsedDuration = slidesData.slice(0, currentSlideIndex + 1).reduce((acc, s) => acc + s.duration, 0);
        
        requestAnimationFrame(() => {
             progressBar.style.width = `${(elapsedDuration / totalDuration) * 100}%`;
        });
       
        currentSlideIndex++;
        
        clearTimeout(slideTimeout);
        slideTimeout = setTimeout(showNextSlide, slide.duration);
    }
    
    window.onload = () => {
        showNextSlide();
    };

</script>
</body>
</html>
