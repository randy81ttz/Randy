<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회사톡으로 배우는 금융: % vs %p</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #111827;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .app-container {
            width: 100%;
            max-width: 380px;
            aspect-ratio: 9 / 16;
            background-color: #A8C5D4;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border-radius: 2rem;
            border: 4px solid #4B5563;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .screen { display: none; height: 100%; width: 100%; flex-direction: column; }
        .screen.active { display: flex; }
        #main-screen { justify-content: center; align-items: center; text-align: center; color: #1F2937; background: linear-gradient(135deg, #FFFDE7, #FFF8E1); padding: 2rem; }
        .chat-header { background-color: #F9FAFB; color: #1F2937; flex-shrink: 0; border-bottom: 1px solid #E5E7EB; }
        .chat-box { scroll-behavior: smooth; }
        .chat-box::-webkit-scrollbar { width: 4px; }
        .chat-box::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 10px; }
        .chat-bubble-wrapper { opacity: 0; transform: translateY(20px); transition: opacity 0.4s ease-out, transform 0.4s ease-out; }
        .chat-bubble-wrapper.show { opacity: 1; transform: translateY(0); }
        .typing-indicator span { animation: blink 1.2s infinite; }
        @keyframes blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 1; } }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        .highlight { font-weight: 900; color: #EF4444; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        #summary-screen { justify-content: center; align-items: center; text-align: center; color: #1F2937; background: linear-gradient(135deg, #FFD54F, #FFB300); padding: 2rem; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body>
    <div class="app-container">
        <div id="main-screen" class="screen active">
            <div class="flex-grow flex flex-col justify-center items-center">
                <h1 class="text-3xl font-black text-gray-800 leading-tight">"작년보다 이익률 <span class="text-red-500">5%</span> 상승"</h1>
                <h1 class="text-3xl font-black text-gray-800 mt-2 leading-tight">"예금 금리 <span class="text-blue-500">5%p</span> 상승"</h1>
                <h2 class="text-2xl font-bold mt-10 text-gray-600">혹시...<br>이 둘의 차이, 알고 계세요?</h2>
            </div>
            <button id="start-btn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-xl transition duration-300 mt-8 shadow-lg text-lg">알아보기</button>
        </div>
        <div id="chat-container" class="screen">
            <div class="chat-header p-3 flex items-center shadow-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-gray-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                <h1 class="text-lg font-bold text-gray-800">정선배</h1>
            </div>
            <div id="chat-box" class="chat-box flex-1 p-4 overflow-y-auto bg-[#b2c6d7] space-y-4"></div>
        </div>
        <div id="summary-screen" class="screen">
            <h2 class="text-2xl font-bold mb-4">헷갈리는 금융 용어,</h2>
            <h1 class="text-5xl font-black text-white mb-8" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.2);">이것만 기억하세요!</h1>
            <div class="w-full bg-white/50 p-6 rounded-2xl shadow-xl">
                <p class="text-3xl font-bold">% (퍼센트)는</p>
                <p class="text-4xl font-black mt-1">곱셈/나눗셈 (비율)</p>
                <hr class="my-6 border-gray-700/50">
                <p class="text-3xl font-bold">%p (퍼센트포인트)는</p>
                <p class="text-4xl font-black mt-1">덧셈/뺄셈 (단순 차이)</p>
            </div>
        </div>
    </div>
<script>
    const mainScreen = document.getElementById('main-screen');
    const startButton = document.getElementById('start-btn');
    const chatContainer = document.getElementById('chat-container');
    const chatBox = document.getElementById('chat-box');
    const summaryScreen = document.getElementById('summary-screen');
    
    // --- 대화 내용 및 시간 설정 ---
    // typingDuration 값을 줄여서 타이핑 속도를 빠르게 조정
    const conversation = [
        { sender: 'rookie', name: '오신입', text: "선배님! '% 상승'과 '%p 상승'은 같은 말 아닌가요? 너무 헷갈려요!", typingDuration: 2000, delayAfter: 1000 },
        { sender: 'senior', name: '정선배', text: "오신입님, 아주 좋은 질문이에요! 지금부터 딱 1분 만에 완벽히 정리해 드릴게요. 먼저, <b class='text-blue-600'>퍼센트(%)</b>는 '비율'이에요.", typingDuration: 2000, delayAfter: 1200 },
        { sender: 'senior', name: '정선배', text: "예를 들어 월급 300만 원이 <span class='highlight'>10%</span> 올랐다면? 💵<br>300만 원 × 10% = <b>30만 원</b>이 오르는 거죠. 즉, <b class='text-blue-600'>곱셈</b> 계산!", typingDuration: 2500, delayAfter: 1800 },
        { sender: 'rookie', name: '오신입', text: "아하! 그럼 퍼센트포인트는요?", typingDuration: 1500, delayAfter: 1000 },
        { sender: 'senior', name: '정선배', text: "<b>퍼센트포인트(%p)</b>는 더 쉬워요. 그냥 숫자끼리의 '단순 차이'입니다.", typingDuration: 2000, delayAfter: 1200 },
        { sender: 'senior', name: '정선배', text: "예금 금리가 2%에서 3%로 올랐다면? 🏦<br>3% - 2% = <span class='highlight'>1%p</span> 오른 거예요. 즉, <b class='text-red-600'>뺄셈</b> 계산!", typingDuration: 2500, delayAfter: 1800 },
        { sender: 'rookie', name: '오신입', text: "만약 '금리가 1% 올랐다'고 하면 어떻게 다른가요?", typingDuration: 2000, delayAfter: 1500 },
        { sender: 'senior', name: '정선배', text: "좋은 지적! 그건 기존 금리 2%의 1%인... <span class='highlight'>0.02%</span>가 올랐다는 뜻이 돼요. <b class='text-red-600'>1%p</b>와는 엄청난 차이죠?", typingDuration: 2800, delayAfter: 2000 },
        { sender: 'rookie', name: '오신입', text: "와! 이제야 확실히 알겠어요! 감사합니다!", typingDuration: 0, delayAfter: 1500 }
    ];

    let timeoutIds = [];
    let isPlaying = false;

    function createTypingIndicator() { /* ...생략... */ }
    function playConversation() { /* ...생략... */ }
    
    // (이하 스크립트는 이전 버전과 동일합니다)
    function createTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.id = 'typing-indicator';
        typingDiv.className = 'flex items-start space-x-2';
        typingDiv.innerHTML = `<div class="w-8 h-8 rounded-full bg-gray-300 flex-shrink-0 flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><div class="flex items-center space-x-1.5 p-3 bg-white rounded-lg mt-5"><span class="block w-2 h-2 bg-gray-400 rounded-full"></span><span class="block w-2 h-2 bg-gray-400 rounded-full"></span><span class="block w-2 h-2 bg-gray-400 rounded-full"></span></div>`;
        return typingDiv;
    }
    function playConversation() {
        if (isPlaying) return;
        isPlaying = true;
        chatBox.innerHTML = '';
        let cumulativeDelay = 500;
        conversation.forEach((msg, index) => {
            const isLastMessage = index === conversation.length - 1;
            if (msg.typingDuration > 0) {
               timeoutIds.push(setTimeout(() => {
                    if(msg.sender === 'senior') {
                       const indicator = createTypingIndicator();
                       chatBox.appendChild(indicator);
                       chatBox.scrollTop = chatBox.scrollHeight;
                    }
               }, cumulativeDelay));
            }
            cumulativeDelay += msg.typingDuration;
            timeoutIds.push(setTimeout(() => {
                const indicator = document.getElementById('typing-indicator');
                if (indicator) indicator.remove();
                const messageWrapper = document.createElement('div');
                messageWrapper.className = 'flex chat-bubble-wrapper';
                if (msg.sender === 'senior') {
                    messageWrapper.classList.add('justify-start', 'items-start', 'space-x-2');
                    messageWrapper.innerHTML = `<div class="w-8 h-8 rounded-full bg-gray-300 flex-shrink-0 flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><div><div class="text-xs font-bold text-gray-700 mb-1">${msg.name}</div><div class="px-4 py-2 rounded-lg max-w-[250px] break-words bg-white text-gray-800 shadow-sm">${msg.text}</div></div>`;
                } else {
                    messageWrapper.classList.add('justify-end');
                    messageWrapper.innerHTML = `<div class="px-4 py-2 rounded-lg max-w-[250px] break-words bg-yellow-300 text-gray-800 shadow-sm">${msg.text}</div>`;
                }
                chatBox.appendChild(messageWrapper);
                setTimeout(() => messageWrapper.classList.add('show'), 50);
                chatBox.scrollTop = chatBox.scrollHeight;
                if (isLastMessage) {
                     timeoutIds.push(setTimeout(() => {
                        chatContainer.classList.remove('active');
                        summaryScreen.classList.add('active');
                        isPlaying = false;
                    }, msg.delayAfter));
                }
            }, cumulativeDelay));
            cumulativeDelay += msg.delayAfter;
        });
    }
    startButton.addEventListener('click', () => {
        mainScreen.classList.remove('active');
        chatContainer.classList.add('active');
        playConversation();
    });
</script>
</body>
</html>
